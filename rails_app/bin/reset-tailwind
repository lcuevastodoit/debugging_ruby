#!/usr/bin/env bash

# Reset script to clean up Tailwind CSS installation and start fresh
# This script removes all node_modules and reinstalls everything from scratch

set -e # Exit on error

echo "🧹 Cleaning up previous Tailwind installation..."

echo "Removing node_modules..."
rm -rf node_modules

echo "Removing yarn.lock and package-lock.json..."
rm -f yarn.lock
rm -f package-lock.json

echo "Removing generated CSS files..."
rm -f app/assets/builds/application.tailwind.css

echo "📦 Reinstalling JavaScript dependencies..."
if command -v yarn &> /dev/null; then
  yarn install
else
  npm install
fi

echo "🏗️ Rebuilding Tailwind CSS..."
if command -v yarn &> /dev/null; then
  yarn build:css
else
  npm run build:css
fi

echo "✅ Tailwind CSS reset complete!"
echo "Run 'bin/dev' to start the development server"